// ==UserScript==
// @name 91porn去广告+支持弹幕
// @version 0.1
// @description 91porn去广告+支持弹幕,自动生效！
// @author Panda1337
// @match */view_video.php?viewkey**
// @icon https://www.google.com/s2/favicons?domain=workarea2.live
// @grant none
// @namespace https://greasyfork.org/users/730524
// ==/UserScript==

// ==UserScript==
// @name 91porn去广告+支持弹幕
// @version 0.1
// @description 91porn去广告+支持弹幕,自动生效！
// @author Panda1337
// @match */view_video.php?viewkey**
// @icon https://www.google.com/s2/favicons?domain=workarea2.live
// @grant none
// @namespace https://greasyfork.org/users/730524
// ==/UserScript==
var htmls = `
<!DOCTYPE HTML>
<html>

<body style="background: rgb(32,33,36);">
    <meta name="referrer" content="never">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <!-- <link rel="stylesheet" href="DPlayer.min.css" /> -->
    <div id="dplayer" class="dplayer" style="height: 70vh;"></div>
    <script src="https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js"></script>
    <script>
        const dp = new DPlayer({
            container: document.getElementById('dplayer'),
            autoplay: true,
            video: {
                quality: [
                    {
                        name: '色',
                        url: 'urlhere',
                        type: 'hls',
                    },
                ],
                defaultQuality: 0,
                // pic: 'demo.png',
                // thumbnails: 'thumbnails.jpg',
            },
        });
        dp.seek(10);
    </script>
    <h2 style="color: gray;">title</h2>

    <h2 style="color: gray;">urlhere</h2>
</body>

</html>`;

function strencode2(f) {
var a = {
'Anfny': function b(c, d) {
return c(d);
}
};
return a['Anfny'](unescape, f);
}

var jm = strencode2(document.documentElement.outerHTML.split("document.write(strencode2(\"")[1].split("\"")[0]);
var u = jm.split("
<source src='")[1].split("'")[0];
console.log(u)
document.write(htmls.replace(" urlhere", u).replace("urlhere", u).replace("title", document.title))